목차
# HTTP/1.0과 HTTP/1.1의 차이
## HTTP/1.0
매 연결마다 [[TCP·IP 4계층#TCP 연결|3-way handshake]]를 수행하여 RTT가 늘어나는 단점이 있다.  

## HTTP/1.1
기존 1.0을 세 가지 측면에서 보완한 프로토콜  

### keep-alive default
![[keep-alive.png]]  
1.0과 달리 TCP 연결이 구축된 이후에 연결이 끊길 때까지 계속 데이터를 주고 받을 수 있다.  
1.0엔 시험적으로 있었고 1.1때 기본값이 되었다.  
### 호스트 헤더
1.0은 서버에 호스트가 단 하나라고 가정했기 때문에 헤더에 호스트가 포함되지 않았다.  
1.1은 서버에 여러 개의 호스트가 있는 것을 염두하고 헤더에 호스트 정보를 포함한다.  

### 대역폭 최적화
1.1부터는 파일 다운로드가 중간에 끊겨도 재개할 수 있다.  

### 단점
![[HOL Blocking.png]]  
HOL Blocking(Head Of Line blocking): 패킷은 클라이언트가 요청한 순서대로 서버가 클라이언트에 전송하는데 앞 패킷이 크기가 커서 속도가 느려지면 뒤의 패킷들도 줄줄이 지연된다.

## 요청 줄이기
1.1이 되어도 요청할 때마다 RTT가 증가하기 때문에 요청 자체를 줄이는 기술이 나왔다.  

### 이미지 스프라이트
![[image-sprite.png]]  
웹 페이지에 필요한 수많은 이미지를 하나의 이미지로 합친다.  

### 코드 압축
코드에 포함된 공백문자, 띄어쓰기, 개행을 줄인다.

### 이미지 Base64 인코딩
이미지 파일을 64진법 문자열로 인코딩하여 이미지 서버에 요청할 필요가 없도록 만든다.  
하지만 파일 크기가 대략 37% 증가한다.  

---
# HTTP/2와 HTTP/3
## HTTP/2
### 바이너리 포맷 계층
![[바이너리 포맷 계층.png]]  
또는 바이너리 프레이밍 계층이라고도 한다. 애플리케이션 계층과 전송 계층 사이에 바이너리 포맷 계층을 추가하여 기존 HTTP/1.x에선 HTTP 메시지가 개행으로 구분되는 일반 텍스트였으나 바이너리 포맷 계층에서 더 작은 메시지와 프레임으로 분활되어 바이너리 형식(0과 1)으로 인코딩된다.  

### 멀티플렉싱
단일 TCP 연결의 여러 스트림에서 여러 HTTP 요청과 응답을 비동기적으로 전송하여 HOL Blocking을 해결한다.[^1]  

> [!NOTE]  
> **스트림** HTTP/2.0에서 클라이언트와 서버 사이에 교환되는 프레임의 독립된 양방향 시퀀스  
> **메시지** 논리적 요청이나 응답에 매핑되는 프레임의 전체 시퀀스
> **프레임** HTTP/2.0에서 통신의 최소 단위이며 하나의 프레임 헤더 포함되어 스트림 식별

프레임에 포함된 스트림 ID로 프레임이 분할되더라도 응답 데이터에서 올바른 순서대로 재조립  

### 서버푸시
클라이언트의 요청 없이 서버가 클라이언트에 리소스를 푸시  
ex) 요청한 HTML에 CSS가 포함되었다면 CSS를 따로 요청하지 않아도 서버가 CSS를 전송  

### 헤더 압축



[^1]: 기존 HTTP/1.x에선 단일 TCP 연결로 병렬 요청이 불가했다.